"use strict";(self.webpackChunkinvoicer=self.webpackChunkinvoicer||[]).push([[860],{3791:function(e,s,n){n.d(s,{Z:function(){return k}});var t=n(1413),a=n(9439),r=n(4554),i=n(493),l=n(4852),o=n(6259),c=n(4395),u=n(4663),d=n(890),m=n(3400),x=n(9953),h=n(2791),p=n(2279);var f=function(e){var s=e.children,n=e.window,t=(0,p.Z)({disableHysteresis:!0,threshold:0,target:n?n():void 0});return h.cloneElement(s,{elevation:t?4:0})},b=n(8008),g=n(9031),N=n(3967),v=n(5193),j=n(6030),y=n(1087),w=n(7201),Z=n(7689),C=n(184),k=function(e){var s=(0,g.Z)(),n=(0,h.useState)(!1),p=(0,a.Z)(n,2),k=p[0],S=p[1],F=(0,h.useState)(!1),P=(0,a.Z)(F,2),B=P[0],A=P[1],I=(0,j.v9)((function(e){return e.user.user})),U=(0,Z.s0)(),q=function(e){return function(s){("keydown"!==s.type||"Tab"!==s.key&&"Shift"!==s.key)&&S(e)}};(0,h.useEffect)((function(){I.id?A(!0):A(!1)}),[I.id]);var z=function(){window.location.reload(!1),(0,w.CF)("success","Goodbye!\ud83d\udc4b")},O=(0,N.Z)(),E=(0,v.Z)(O.breakpoints.down("sm"));return(0,C.jsx)(r.Z,{sx:{marginBottom:"70px"},children:(0,C.jsx)(f,(0,t.Z)((0,t.Z)({},e),{},{children:(0,C.jsx)(c.Z,{children:(0,C.jsxs)(u.Z,{className:s.toolBar,children:[B?(0,C.jsx)(y.rU,{to:"/dashboard",children:(0,C.jsx)(d.Z,{variant:"h6",className:s.logo,children:"Invoicer"})}):(0,C.jsx)(y.rU,{to:"/",children:(0,C.jsx)(d.Z,{variant:"h6",className:s.logo,children:"Invoicer"})}),E?(0,C.jsxs)(r.Z,{children:[(0,C.jsx)(m.Z,{size:"large",edge:"end",color:"inherit","aria-label":"menu",onClick:q(!0),children:(0,C.jsx)(b.Z,{className:s.menuIcon,fontSize:"large"})}),(0,C.jsx)(x.ZP,{anchor:"right",open:k,onClose:q(!1),children:(0,C.jsx)(r.Z,{sx:{width:250},role:"presentation",onClick:q(!1),onKeyDown:q(!1),children:(0,C.jsx)(i.Z,{children:B?(0,C.jsx)(l.ZP,{button:!0,onClick:function(){return z()},children:(0,C.jsx)(o.Z,{primary:"Sign Out"})}):(0,C.jsx)(y.rU,{to:"/login",children:(0,C.jsx)(l.ZP,{button:!0,children:(0,C.jsx)(o.Z,{primary:"Log in"})})})})})})]}):(0,C.jsx)(r.Z,{sx:{display:"flex",justifyContent:"space-between",flexGrow:"0.05"},children:B?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{className:s.link,onClick:function(){U("/dashboard")},children:"Home"}),(0,C.jsx)(d.Z,{className:s.link,onClick:function(){U("/profile",{state:{source:"from_dashboard"}})},children:"Profile"}),(0,C.jsx)(d.Z,{className:s.link,onClick:function(){return z()},children:"Sign Out"})]}):(0,C.jsx)(y.rU,{to:"/login",children:(0,C.jsx)(d.Z,{className:s.link,children:"Log in"})})})]})})}))})}},6860:function(e,s,n){n.r(s);var t=n(4165),a=n(5861),r=n(9439),i=n(2791),l=n(7689),o=n(4290),c=n(5288),u=n(9692),d=n(6030),m=n(3791),x=n(9388),h=n(7201),p=n(184);s.default=function(e){console.log("aa",e);var s=(0,d.v9)((function(e){return e.user.user})),n=(0,i.useState)(""),f=(0,r.Z)(n,2),b=f[0],g=f[1],N=(0,i.useState)(""),v=(0,r.Z)(N,2),j=v[0],y=v[1],w=(0,i.useState)(""),Z=(0,r.Z)(w,2),C=Z[0],k=Z[1],S=(0,i.useState)(""),F=(0,r.Z)(S,2),P=F[0],B=F[1],A=(0,i.useState)(""),I=(0,r.Z)(A,2),U=I[0],q=I[1],z=(0,i.useState)(""),O=(0,r.Z)(z,2),E=O[0],T=O[1],G=(0,i.useState)(""),H=(0,r.Z)(G,2),D=H[0],L=H[1],_=(0,i.useState)(""),J=(0,r.Z)(_,2),R=J[0],M=J[1],K=(0,i.useState)(""),V=(0,r.Z)(K,2),W=V[0],Y=V[1],Q=(0,i.useState)(""),X=(0,r.Z)(Q,2),$=X[0],ee=X[1],se=(0,i.useState)(""),ne=(0,r.Z)(se,2),te=ne[0],ae=ne[1],re=(0,i.useState)(""),ie=(0,r.Z)(re,2),le=ie[0],oe=ie[1],ce=(0,i.useState)(""),ue=(0,r.Z)(ce,2),de=ue[0],me=ue[1],xe=(0,i.useState)("https://www.pesmcopt.com/admin-media/images/default-logo.png"),he=(0,r.Z)(xe,2),pe=he[0],fe=he[1],be=(0,l.s0)(),ge=(0,l.TH)().state,Ne=(0,i.useState)(!0),ve=(0,r.Z)(Ne,2),je=ve[0],ye=ve[1],we=(0,i.useState)(!0),Ze=(0,r.Z)(we,2),Ce=Ze[0],ke=Ze[1];(0,i.useEffect)((function(){if(!s.id)return be("/login");try{var e=(0,u.IO)((0,u.hJ)(c.ZP,"businesses"),(0,u.ar)("user_id","==",s.id)),n=(0,u.cf)(e,function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var a,r,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n.forEach((function(e){a.push(e.data().name)})),ye(!1),console.log("business.length ",a.length),a.length>0&&ke(!1),"from_login"===ge.source&&a.length>0&&be("/dashboard"),r=(0,u.IO)((0,u.hJ)(c.ZP,"businesses"),(0,u.ar)("user_id","==",s.id)),e.next=9,(0,u.PL)(r);case 9:(i=e.sent).forEach((function(e){console.log("docdata",e.id,i);var s=e.data();g(s.businessName),y(s.businessAddress),k(s.businessCity),B(s.businessState),q(s.businessPincode),T(s.businessGSTN),L(s.accountName),M(s.accountNumber),Y(s.ifscCode),ee(s.bankName),ae(s.bankBranch),oe(s.declarations),me(s.notesForUser)}));case 11:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}());return function(){return n()}}catch(r){console.log(r)}}),[be,s.id]);var Se=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log("button clicked",Ce),e.prev=2,!Ce){e.next=9;break}return e.next=6,(0,u.ET)((0,u.hJ)(c.ZP,"businesses"),{user_id:s.id,businessName:b,businessAddress:j,businessCity:C,businessState:P,businessPincode:U,businessGSTN:E,accountName:D,accountNumber:R,ifscCode:W,bankName:$,bankBranch:te,declarations:le,notesForUser:de});case 6:r=e.sent,e.next=16;break;case 9:return i=(0,u.IO)((0,u.hJ)(c.ZP,"businesses"),(0,u.ar)("user_id","==",s.id)),e.next=12,(0,u.PL)(i);case 12:return e.sent.forEach((function(e){r=e.id})),e.next=16,(0,u.r7)((0,u.JU)(c.ZP,"businesses",r),{user_id:s.id,businessName:b,businessAddress:j,businessCity:C,businessState:P,businessPincode:U,businessGSTN:E,accountName:D,accountNumber:R,ifscCode:W,bankName:$,bankBranch:te,declarations:le,notesForUser:de});case 16:if(l=(0,o.iH)(c.tO,"businesses/".concat(r,"/image")),"https://www.pesmcopt.com/admin-media/images/default-logo.png"===pe){e.next=23;break}return e.next=20,(0,o.sf)(l,pe,"data_url").then((0,a.Z)((0,t.Z)().mark((function e(){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Jt)(l);case 2:return s=e.sent,e.next=5,(0,u.r7)((0,u.JU)(c.ZP,"businesses",r),{logo:s});case 5:(0,h.CF)("success","Your profile has been created!");case 6:case"end":return e.stop()}}),e)}))));case 20:be("/dashboard"),e.next=24;break;case 23:be("/dashboard");case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(2),console.log(e.t0),(0,h.CF)("error","Sorry some error while updating the details, Please try again.");case 30:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(s){return e.apply(this,arguments)}}();return(0,p.jsx)(p.Fragment,{children:je?(0,p.jsx)(x.Z,{}):(0,p.jsxs)("div",{children:[(0,p.jsx)(m.Z,{}),(0,p.jsxs)("div",{className:"w-full md:p-8 md:w-2/3 md:shadow mx-auto mt-8 rounded p-3 my-8",children:[(0,p.jsx)("h3",{className:"text-center font-bold text-xl mb-6",children:"Setup Business Profile"}),(0,p.jsxs)("form",{className:"w-full mx-auto flex flex-col",onSubmit:Se,children:[(0,p.jsx)("label",{htmlFor:"businessName",className:"text-sm",children:"Name"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"businessName",value:b,onChange:function(e){return g(e.target.value)}}),(0,p.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,p.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,p.jsx)("label",{htmlFor:"businessAddress",className:"text-sm",children:"Address"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"businessAddress",value:j,onChange:function(e){return y(e.target.value)}})]}),(0,p.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,p.jsx)("label",{htmlFor:"businessCity",className:"text-sm",children:"City"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"businessCity",value:C,onChange:function(e){return k(e.target.value)}})]})]}),(0,p.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,p.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,p.jsx)("label",{htmlFor:"businessState",className:"text-sm",children:"State"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"businessState",value:P,onChange:function(e){return B(e.target.value)}})]}),(0,p.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,p.jsx)("label",{htmlFor:"businessPincode",className:"text-sm",children:"Pincode"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"businessPincode",value:U,onChange:function(e){return q(e.target.value)}})]})]}),(0,p.jsx)("label",{htmlFor:"businessGSTN",className:"text-sm",children:"GSTN"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"businessGSTN",value:E,onChange:function(e){return T(e.target.value)}}),(0,p.jsx)("h3",{className:"text-center font-bold text-xl mb-6",children:"Setup Business Bank Details"}),(0,p.jsx)("label",{htmlFor:"accountName",className:"text-sm",children:"Account Holder Name"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"accountName",value:D,onChange:function(e){return L(e.target.value)}}),(0,p.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,p.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,p.jsx)("label",{htmlFor:"accountNumber",className:"text-sm",children:"Account Number"}),(0,p.jsx)("input",{type:"number",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 rounded",name:"accountNumber",value:R,onChange:function(e){return M(e.target.value)}})]}),(0,p.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,p.jsx)("label",{htmlFor:"bankName",className:"text-sm",children:"Bank Name"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"bankName",value:$,onChange:function(e){return ee(e.target.value)}})]})]}),(0,p.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,p.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,p.jsx)("label",{htmlFor:"ifscCode",className:"text-sm",children:"IFSC Code"}),(0,p.jsx)("input",{type:"number",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 rounded",name:"ifscCode",value:W,onChange:function(e){return Y(e.target.value)}})]}),(0,p.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,p.jsx)("label",{htmlFor:"bankBranch",className:"text-sm",children:"Bank Branch"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"bankBranch",value:te,onChange:function(e){return ae(e.target.value)}})]})]}),(0,p.jsx)("h3",{className:"text-center font-bold text-xl mb-6",children:"Additional Details"}),(0,p.jsx)("label",{htmlFor:"declarations",className:"text-sm",children:"Declarations"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"declarations",value:le,onChange:function(e){return oe(e.target.value)}}),(0,p.jsx)("label",{htmlFor:"notesForUser",className:"text-sm",children:"Any notes for customers ?"}),(0,p.jsx)("input",{type:"text",required:!0,className:"py-2 px-4 bg-gray-100 w-full mb-6 capitalize rounded",name:"notesForUser",value:de,onChange:function(e){return me(e.target.value)}}),(0,p.jsxs)("div",{className:"flex items-center space-x-4 w-full",children:[(0,p.jsx)("div",{className:"flex flex-col w-1/2",children:(0,p.jsx)("img",{src:pe,alt:"Logo",className:" w-full max-h-[300px]"})}),(0,p.jsxs)("div",{className:"flex flex-col w-full",children:[(0,p.jsx)("label",{htmlFor:"logo",className:"text-sm mb-1",children:"https://www.pesmcopt.com/admin-media/images/default-logo.png"===pe&&"Upload logo"}),(0,p.jsx)("input",{type:"file",accept:"image/*",className:"w-full mb-6  rounded",name:"logo",onChange:function(e){var s=new FileReader;e.target.files[0]&&s.readAsDataURL(e.target.files[0]),s.onload=function(e){fe(e.target.result)}}})]})]}),(0,p.jsx)("button",{className:"bg-blue-800 text-gray-100 w-full p-5 rounded my-6",children:Ce?"COMPLETE PROFILE":"UPDATE PROFILE"})]})]})]})})}},7201:function(e,s,n){n.d(s,{CF:function(){return a},Vb:function(){return r}});var t=n(6960),a=function(e,s){"success"===e?t.Am.success(s,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):t.Am.error(s,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},r=function(e){return parseFloat((Math.round(100*e)/100).toFixed(2))}},9031:function(e,s,n){var t=n(4942),a=(0,n(2455).Z)((function(e){return{toolBar:{height:"10vh",display:"flex",justifyContent:"space-between",padding:"20px",backgroundColor:"white"},logo:{color:"#041562",cursor:"pointer"},inputField:{marginBottom:"20px !important",width:"100%"},link:{color:"#000",cursor:"pointer"},menuIcon:{color:"#000"},heroContainer:{width:"100%",minHeight:"80vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},heroText:{marginBottom:"20px !important",fontWeight:"bolder",color:"#041562"},heroSubtitle:{marginBottom:"30px !important",color:"#11468F",opacity:"0.8"},authGridContainer:{width:"100%",height:"100%"},authGridImage:(0,t.Z)({backgroundColor:"#11468F",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"5px"},e.breakpoints.between("xs","md"),{display:"none"}),authSvg:{width:"100%"},authForm:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column !important"},authFormContainer:(0,t.Z)({padding:"10px 15px 0px 15px"},e.breakpoints.between("xs","sm"),{padding:"10px 15px 0px 15px"})}}));s.Z=a}}]);
//# sourceMappingURL=860.e1f0fc47.chunk.js.map